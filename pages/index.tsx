import React, { useState } from 'react';
import type { NextPage } from 'next';
import Head from 'next/head';
import { Box, Flex } from '@chakra-ui/react';

import { Settings } from '@utils/constants';
import { SideSettings, ReferencesCanvas } from '@components/home';

/**
 *
 * TODOs:
 * CustomizeModal & HelpModal (WIP)
 * FooterControls onFinishCall (Pending)
 * ReferencesCanvas fit reference on div (Pending)
 * Responsive Design (Pending)
 * Custom themes light/dark (Pending)
 * Localization en/sp (Pending)
 *
 **/

const HomePage: NextPage = () => {
	const [settings, setSettings] = useState<Settings>();
	const [current, setCurrent] = useState<number>(0);

	const onPrevRef = () => {
		if (current > 0) {
			setCurrent(current - 1);
		}
	};

	const onNextRef = () => {
		if (settings && current < settings.imgs.length) {
			setCurrent(current + 1);
		}
	};

	return (
		<>
			<Head>
				<title>Doodleline | Practice</title>
				<meta name='description' content='Generated by create next app' />
				<link rel='icon' href='/favicon.ico' />
			</Head>

			<Flex direction='row' h='100vh' w='100vw'>
				<Box flex={1} p={5} h='100%' w='100%'>
					<SideSettings
						onStart={(settings) => setSettings(settings)}
						onOpenHelp={() => console.log('Help')}
						onOpenCustomize={() => console.log('Customize')}
					/>
				</Box>
				<Box flex={2} p={5} h='100%' w='100%'>
					<ReferencesCanvas imgs={settings?.imgs} current={current} />
				</Box>
			</Flex>
		</>
	);
};

export default HomePage;
